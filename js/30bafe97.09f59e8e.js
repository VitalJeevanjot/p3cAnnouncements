(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["30bafe97"],{"16ea":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-layout",[i("q-layout-header",{staticClass:"no-shadow"},[i("q-toolbar",{staticClass:"text-black",attrs:{color:"white"}},[i("q-btn",{attrs:{round:"",dense:"",icon:"arrow_back"},on:{click:function(t){e.$router.push("/")}}}),i("q-item",[i("q-item-side",{attrs:{avatar:this.profile_pic}})],1),i("q-toolbar-title",[e._v("\n          "+e._s(this.title)+"\n          "),i("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[e._v(e._s(this.mobile_no)+" - "+e._s(this.datetime))])]),i("q-btn",{attrs:{round:"",color:"green text-grey-1",dense:"",size:"lg",side:"right",icon:"update"},nativeOn:{click:function(t){return e.openUpdatePostModal(t)}}})],1)],1),i("q-page-container",[i("q-page",[i("div",{staticClass:"row"},[i("q-modal",{attrs:{maximized:"","no-backdrop-dismiss":""},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[i("div",{staticClass:"row justify-center"},[i("p",{staticClass:"text-light",attrs:{align:"center"}},[e._v("Press `ESC` to go back or click\n                "),i("q-btn",{attrs:{color:"grey-9",label:"back",outline:""},nativeOn:{click:function(t){return e.closeModal(t)}}})],1)]),i("div",{staticClass:"row justify-center q-mb-sm"},[i("q-toggle",{attrs:{color:"teal-8",label:"Hide Post"},on:{input:e.makeItNull},model:{value:e.make_it_null,callback:function(t){e.make_it_null=t},expression:"make_it_null"}})],1),i("div",{staticClass:"row justify-center",staticStyle:{"background-color":"#f7f7f7"}},[i("div",{staticClass:"col-9"},[i("q-input",{staticClass:"q-mt-md q-ml-sm q-mr-sm",attrs:{type:"text",inverted:"",maxlength:90,disable:e.disable_editor,color:"white text-black",error:e.error_title,"float-label":"Add New Title *",clearable:""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),i("div",{staticClass:"col-9 q-ma-md"},[i("q-editor",{attrs:{disable:e.disable_editor,"toolbar-color":"grey-10",toolbar:[["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.i18n.editor.formatting,icon:e.$q.icon.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.i18n.editor.fontSize,icon:e.$q.icon.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.i18n.editor.defaultFont,icon:e.$q.icon.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered"],[{label:e.$q.i18n.editor.align,icon:e.$q.icon.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)]),i("br"),i("div",{staticClass:"row justify-around",staticStyle:{padding:"10px"},attrs:{color:"black"}},[i("div",{staticClass:"col-md-5"},[i("q-uploader",{attrs:{url:e.uploader_url,disable:e.disable_uploader,"hide-upload-button":"",name:e.thumbnail,"float-label":"Upload Thumbnail",extensions:".jpeg, .jpg, .png, .gif",error:e.error_thumbnail},on:{add:e.thumbnailAdded,"remove:cancel":e.thumbnailRemoved,"remove:done":e.thumbnailRemoved,"remove:abort":e.thumbnailRemoved}})],1),i("div",{staticClass:"col-md-5"},[i("q-uploader",{attrs:{url:e.uploader_url,disable:e.disable_uploader,"hide-upload-button":"",name:e.profile_pic,"float-label":"Upload Profile Picture",extensions:".jpeg, .jpg, .png, .gif",error:e.error_profilepic},on:{add:e.ppadded,"remove:cancel":e.ppRemoved,"remove:done":e.ppRemoved,"remove:abort":e.ppRemoved}})],1)]),i("div",{staticClass:"row justify-center"},[i("div",{staticClass:"col-7 q-pr-sm"},[i("q-input",{attrs:{type:"tel",error:e.error_mobile,prefix:"+",required:"","float-label":"Mobile number *",clearable:"",maxlength:15,decimals:0,placeholder:"Enter mobile number with Country code"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),i("div",{staticClass:"col-6 q-pl-sm"},[i("q-input",{attrs:{type:"tel",error:e.error_verification,disable:e.disable,"float-label":"Verification Code *",clearable:"",maxlength:6,decimals:0},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),i("div",{staticClass:"col-8 q-pl-sm"},[i("p",{staticClass:"text-light",attrs:{align:"center"}},[e._v("You will receive SMS message with a code and standard rates will apply.")])])]),i("div",{staticClass:"row q-pa-sm justify-center"},[i("q-btn",{attrs:{label:e.send,id:"sendSms"},nativeOn:{click:function(t){return e.sendsms(t)}}}),i("q-btn",{staticClass:"q-ml-sm",attrs:{hidden:e.hidden,label:"Confirm",color:"primary"},nativeOn:{click:function(t){return e.publishUpdate(t)}}})],1)])],1),i("div",{staticClass:"row justify-center"},[i("a",{attrs:{href:this.image}},[i("img",{staticClass:"responsive",staticStyle:{"object-fit":"cover",height:"35vw"},attrs:{src:this.image}})]),i("div",{staticClass:"col-6"},[i("q-editor",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{toolbar:[],"content-class":"",readonly:""},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)]),i("div",{staticClass:"row justify-center q-mt-lg",attrs:{separator:""}},[i("div",{staticClass:"col-2"},[i("hr",{attrs:{color:"#f1f1f1"}})])])])],1)],1)},a=[];o._withStripped=!0;i("6b54"),i("96cf");var s=i("c973"),r=i.n(s),n=(i("7f7f"),i("b5ae")),l={data:function(){return{model:"",title:"",datetime:"",mobile_no:"",books:[],image:"",opened:!1,thumbail_files:[],pp_files:[],profile_pic:"",thumbnail:"",uploader_url:"",error_mobile:!1,error_verification:!1,error_thumbnail:!1,error_title:!1,error_profilepic:!1,disable:!0,code:"",text:"",send:"Send SMS",hidden:!0,wheretoPost:"",post_number:null,timestamp:null,thumbnail_fileURL:"",pp_fileURL:"",code_used:null,make_it_null:!1,disable_editor:!1,disable_uploader:!1,recent_post:"",post_id:0,uid:null,onstart:!0}},mounted:function(){var e=this;this.onstart=!0,this.$q.loading.show(),this.$firebase.auth().signInAnonymously().then(function(){return console.log('"Mounted Signed Anny"')}).catch(function(t){e.$q.notify(t.message)}),this.$firebase.auth().onAuthStateChanged(function(t){t&&(e.uid=t.uid,e.getData())}),this.wheretoPost=this.$route.params.location,this.post_number=this.$route.params.pn},methods:{makeItNull:function(e){!0===e?(this.disable_editor=!0,this.disable_uploader=!0):(this.disable_editor=!1,this.disable_uploader=!1)},openUpdatePostModal:function(){this.opened=!0},closeModal:function(){this.opened=!1},ppadded:function(e){this.pp_files=e,this.profile_pic=e[0].name},thumbnailAdded:function(e){this.thumbnail_files=e,this.thumbnail=e[0].name},ppRemoved:function(e){this.profile_pic="",this.pp_files=[]},thumbnailRemoved:function(e){this.thumbnail_files=[],this.thumbnail=""},publishUpdate:function(){var e=r()(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.onstart=!1,this.$firebase.auth().signInAnonymously().catch(function(e){t.$q.notify(e.message)}),this.$q.loading.show({message:"Please Wait..."}),e.next=5,this.setTimeStamp();case 5:this.$v.text.$invalid&&!1===this.disable_editor?(this.$q.notify("Mobile number with country code is required."),this.error_mobile=!0,this.$q.loading.hide()):this.$v.thumbnail.$invalid&&!1===this.disable_editor?(this.$q.notify("A Thumbnail image or video is required"),this.error_mobile=!1,this.error_thumbnail=!0,this.$q.loading.hide()):this.$v.title.$invalid&&!1===this.disable_editor?(this.$q.notify("Enter a valid title with a length of 8 or more but less than 90."),this.error_thumbnail=!1,this.error_mobile=!1,this.error_title=!0,this.$q.loading.hide()):this.$v.code.$invalid?(this.error_mobile=!1,this.error_thumbnail=!1,this.error_title=!1,this.error_verification=!0,this.$q.loading.hide(),this.$q.notify("Please enter correct 6 digit verification code")):this.$v.profile_pic.$invalid&&!1===this.disable_editor?(this.$q.notify("Enter a valid title with a length of 8 characters or more but less than 90."),this.error_thumbnail=!1,this.error_mobile=!1,this.error_title=!1,this.error_profilepic=!0,this.$q.loading.hide()):this.mobile_no!==this.text?(this.$q.notify("Please enter the mobile number that you used to create post"),this.error_mobile=!0,this.$q.loading.hide()):!0===this.disable_editor?(this.error_mobile=!1,this.error_thumbnail=!1,this.error_verification=!1,this.error_title=!1,this.error_profilepic=!1,window.confirmationResult.confirm(this.code).then(function(){t.$axios.get("https://helloacm.com/api/random/?n=128").then(function(e){t.$firebase.database().ref(t.wheretoPost+"/"+t.post_number+"/null").set("true").then(function(){t.$q.notify({message:"Update Published!",color:"green"}),t.$q.loading.hide(),t.opened=!1,t.$router.push("/"),t.hidden=!0}).catch(function(e){t.$q.notify(e),t.$q.loading.hide()})}).catch(function(e){t.$q.notify(e),t.$q.loading.hide()})}).catch(function(e){t.$q.notify(e),t.$q.loading.hide()})):(this.error_mobile=!1,this.error_thumbnail=!1,this.error_verification=!1,this.error_title=!1,this.error_profilepic=!1,this.closeModal(),this.$q.loading.show({message:"Please Wait While Uploading Profile Pic..."}),window.confirmationResult.confirm(this.code).then(function(){var e=new FormData;e.append("file",t.pp_files[0]),e.append("tags","gndu, board, notice"),e.append("upload_preset","myldschl"),e.append("api_key","985345875982584"),e.append("timestamp",t.timestamp/1e3|0),t.$axios.post("https://api.cloudinary.com/v1_1/dpnrocxf9/image/upload",e,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){var i=e.data;t.pp_fileURL=i.secure_url,console.log(t.pp_fileURL);var o=new FormData;o.append("file",t.thumbnail_files[0]),o.append("tags","gndu, board, notice"),o.append("upload_preset","myldschl"),o.append("api_key","985345875982584"),o.append("timestamp",t.timestamp/1e3|0),t.$q.loading.show({message:"Please Wait While Uploading Thumbnail Pic..."}),t.$axios.post("https://api.cloudinary.com/v1_1/dpnrocxf9/image/upload",o,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){var i=e.data;t.thumbnail_fileURL=i.secure_url,console.log(t.thumbnail_fileURL),t.$q.loading.show({message:"Please Wait While Posting Your Request..."}),t.$axios.get("https://helloacm.com/api/random/?n=128").then(function(e){t.$firebase.database().ref(t.wheretoPost+"/"+t.post_number+"/").set({Body:t.model,Comments:"later",Image:t.thumbnail_fileURL,Mobile:t.text,Random_Seed:e.data,Recent_Post:t.recent_post,Title:t.title,Upvotes:"0",DateTime:t.datetime,Profile_Pic:t.pp_fileURL,Updated_On:t.timestamp.toString(),null:t.disable_editor.toString(),code_used:t.code_used,post_id:t.post_id}).then(function(){t.$q.notify({message:"Update Published!",color:"green"}),t.$q.loading.hide(),t.$router.push("/"),t.hidden=!0}).catch(function(e){t.$q.notify(e),t.$q.loading.hide()})}).catch(function(e){t.$q.notify(e),t.$q.loading.hide()})}).catch(function(e){t.$q.notify(e),t.$q.loading.hide()})}).catch(function(e){t.$q.notify(e),t.$q.loading.hide()})}).catch(function(e){t.$q.notify(e),t.$q.loading.hide()}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),sendsms:function(){var e=this;if(console.log(this.title),this.$q.loading.show({message:"Please Wait..."}),this.$v.text.$invalid&&!1===this.disable_editor)this.$q.notify("Mobile number with country code is required."),this.error_mobile=!0,this.$q.loading.hide();else if(this.$v.thumbnail.$invalid&&!1===this.disable_editor)this.$q.notify("A Thumbnail image or video is required"),this.error_thumbnail=!0,this.error_mobile=!1,this.$q.loading.hide();else if(this.$v.title.$invalid&&!1===this.disable_editor)this.$q.notify("Enter a valid title with a length of 8 characters or more but less than 90."),this.error_thumbnail=!1,this.error_mobile=!1,this.error_title=!0,this.$q.loading.hide();else if(this.$v.profile_pic.$invalid&&!1===this.disable_editor)this.$q.notify("Enter a valid title with a length of 8 characters or more but less than 90."),this.error_thumbnail=!1,this.error_mobile=!1,this.error_title=!1,this.error_profilepic=!0,this.$q.loading.hide();else if(this.mobile_no!==this.text)this.$q.notify("Please enter the mobile number that you used to create post"),this.error_mobile=!0,this.$q.loading.hide();else{this.error_mobile=!1,this.error_thumbnail=!1,this.error_title=!1,this.error_profilepic=!1;var t="+"+this.text;try{this.$firebase.auth().signInWithPhoneNumber(t,window.recaptchaVerifier).then(function(t){window.confirmationResult=t,e.$q.loading.hide(),e.disable=!1,e.hidden=!1,e.send="Resend",e.$q.notify({message:"Sent!",color:"primary"})}).catch(function(t){e.$q.loading.hide(),e.disable=!0,e.hidden=!0,e.send="Send",e.$q.notify(t.message)})}catch(e){this.$q.notify(e),this.$q.loading.hide()}}},setTimeStamp:function(){var e=r()(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.get("https://worldclockapi.com/api/json/utc/now").then(function(e){t.timestamp=new Date(e.data.currentDateTime)}).catch(function(e){t.$q.notify(e)});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getData:function(){var e=this;"p3c_admin"===this.$route.params.location&&!0===this.onstart?(this.$p3c_communityref.off(),this.$bookref.on("value",function(t){e.books=[],e.books=t.val();for(var i=0;i<e.books.length;i++)e.books[i].Random_Seed===e.$route.params.id&&(e.model=e.books[i].Body,e.mobile_no=e.books[i].Mobile,e.title=e.books[i].Title,e.datetime=e.books[i].DateTime,e.profile_pic=e.books[i].Profile_Pic,e.image=e.books[i].Image,e.code_used=e.books[i].code_used,e.post_id=e.books[i].post_id,e.$q.loading.hide())},function(e){console.log("The read failed: "+e.code)})):"p3c_community"===this.$route.params.location&&!0===this.onstart&&(this.$bookref.off(),this.$p3c_communityref.on("value",function(t){e.books=[],e.books=t.val();for(var i=0;i<e.books.length;i++)e.books[i].Random_Seed===e.$route.params.id&&(e.model=e.books[i].Body,e.mobile_no=e.books[i].Mobile,e.title=e.books[i].Title,e.datetime=e.books[i].DateTime,e.profile_pic=e.books[i].Profile_Pic,e.image=e.books[i].Image,e.code_used=e.books[i].code_used,e.post_id=e.books[i].post_id,e.$q.loading.hide())},function(e){console.log("The read failed: "+e.code)}))}},validations:{text:{required:n["required"],minLength:Object(n["minLength"])(5)},thumbnail:{required:n["required"]},code:{required:n["required"],minLength:Object(n["minLength"])(6)},title:{required:n["required"],minLength:Object(n["minLength"])(8),maxlength:Object(n["maxLength"])(90)},profile_pic:{required:n["required"]}}},d=l,c=(i("ecd3"),i("2877")),h=Object(c["a"])(d,o,a,!1,null,null,null);h.options.__file="post.vue";t["default"]=h.exports},a6d4:function(e,t,i){},ecd3:function(e,t,i){"use strict";var o=i("a6d4"),a=i.n(o);a.a}}]);
